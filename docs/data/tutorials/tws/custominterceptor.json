{"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/CustomInterceptor"},"schemaVersion":{"patch":0,"minor":3,"major":0},"metadata":{"role":"project","category":"Learn to use the SDK","title":"Intercepting URL requests","categoryPathComponent":"Tutorial-Table-of-Contents"},"hierarchy":{"paths":[["doc:\/\/tws-ios.TWS\/tutorials\/Tutorial-Table-of-Contents","doc:\/\/tws-ios.TWS\/tutorials\/Tutorial-Table-of-Contents\/$volume","doc:\/\/tws-ios.TWS\/tutorials\/Tutorial-Table-of-Contents\/Customizing-TWSView"]],"modules":[{"projects":[{"sections":[{"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/LocalSnippet#Displaying-a-Snippet","kind":"task"}],"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/LocalSnippet"},{"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/RemoteSnippet","sections":[{"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/RemoteSnippet#Connect-with-the-TWS-portal","kind":"task"},{"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/RemoteSnippet#Presenting-snippets","kind":"task"}]},{"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/ManagerCreation","sections":[{"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/ManagerCreation#Manager-creation-and-registration","kind":"task"}]},{"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/MixAndMatch","sections":[{"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/MixAndMatch#Mix-Match","kind":"task"}]},{"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/Notifications","sections":[{"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/Notifications#Integrating-TWSNotifications","kind":"task"}]}],"reference":"doc:\/\/tws-ios.TWS\/tutorials\/Tutorial-Table-of-Contents\/Display-your-first-snippet"},{"projects":[{"sections":[{"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/CustomizingViews#Custom-loading-and-error-views","kind":"task"}],"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/CustomizingViews"},{"sections":[{"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/CustomInterceptor#Custom-interceptors","kind":"task"}],"reference":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/CustomInterceptor"}],"reference":"doc:\/\/tws-ios.TWS\/tutorials\/Tutorial-Table-of-Contents\/Customizing-TWSView"}],"reference":"doc:\/\/tws-ios.TWS\/tutorials\/Tutorial-Table-of-Contents"},"sections":[{"kind":"hero","content":[{"type":"paragraph","inlineContent":[{"text":"Learn how to intercept desired URLs and use them in native flows","type":"text"}]}],"title":"Intercepting URL requests","chapter":"Customizing TWSView","estimatedTimeInMinutes":5},{"kind":"tasks","tasks":[{"contentSection":[{"content":[{"inlineContent":[{"text":"TWSView has an ability to catch URL requests before they are loaded into the view. This gives you the capability to catch that URL and trigger a native flow.","type":"text"}],"type":"paragraph"}],"kind":"contentAndMedia","mediaPosition":"trailing"}],"stepsSection":[{"runtimePreview":null,"media":null,"content":[{"inlineContent":[{"text":"Lets take code from previous tutorial as base.","type":"text"}],"type":"paragraph"}],"caption":[],"code":"CustomInterceptor_00.swift","type":"step"},{"code":"CustomInterceptor_01.swift","caption":[],"content":[{"type":"paragraph","inlineContent":[{"text":"To use a custom interceptor we need to implement a class that conforms TWSViewInterceptor protocol.","type":"text"}]}],"type":"step","runtimePreview":null,"media":null},{"code":"CustomInterceptor_02.swift","caption":[{"inlineContent":[{"text":"Those paths are \/helloWorld which displays hello World text and \/greetUser\/{username} which displays a greeting for a user.","type":"text"}],"type":"paragraph"},{"style":"note","type":"aside","name":"Note","content":[{"type":"paragraph","inlineContent":[{"text":"TWSIntercepted supports two types url and path. Url branch is triggered when the page is loaded into webView, those are typically MPA web pages.","type":"text"},{"type":"text","text":" "},{"text":"Meanwhile path branch is triggered on SPA pages, because there are no full loads when navigating SPA web page.","type":"text"}]}]}],"content":[{"inlineContent":[{"text":"Imagine that https:\/\/www.myWebPage.com has two paths for which we want to implement a native screen instead of displaying them in TWSView.","type":"text"}],"type":"paragraph"}],"type":"step","runtimePreview":null,"media":null},{"runtimePreview":null,"media":null,"content":[{"inlineContent":[{"text":"Add a representation of the current destination to the implementation.","type":"text"},{"text":" ","type":"text"},{"text":"Create an instance of your interceptor and bind it to TWSView.","type":"text"}],"type":"paragraph"}],"caption":[],"code":"CustomInterceptor_03.swift","type":"step"},{"code":"CustomInterceptor_04.swift","runtimePreview":null,"type":"step","caption":[{"inlineContent":[{"text":"Every time TWSView tries to load","type":"text"},{"text":" ","type":"text"},{"type":"codeVoice","code":"https:\/\/www.myWebPage.com\/helloWorld"},{"text":" or","type":"text"},{"text":" ","type":"text"},{"type":"codeVoice","code":"https:\/\/www.myWebPage.com\/greetUser\/{userName}"},{"text":"","type":"text"},{"text":" ","type":"text"},{"text":"our custom flow will be triggered.","type":"text"}],"type":"paragraph"}],"content":[{"inlineContent":[{"text":"Now we add views for corresponding destinations and we are done.","type":"text"}],"type":"paragraph"}],"media":null}],"title":"Custom interceptors","anchor":"Custom-interceptors"}]}],"kind":"project","variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/tutorials\/tws\/custominterceptor"]}],"references":{"CustomInterceptor_02.swift":{"identifier":"CustomInterceptor_02.swift","fileType":"swift","highlights":[{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31}],"fileName":"CustomView.swift","content":["import Foundation","import SwiftUI","import TWS","","struct CustomView: View {","    let mySnippet = TWSSnippet(id: \"mySnippet\", target: URL(string: \"https:\/\/www.myWebPage.com\")!)","    ","    var body : some View {","        ZStack {","            TWSView(snippet: mySnippet)","                .twsBind(loadingView: { AnyView(LoadingView()) })","                .twsBind(preloadingView: { AnyView(LoadingView()) })","                .twsBind(errorView: { error in AnyView(ErrorView(error: error))})","        }","    }","}","","class NavigationInterceptor: TWSViewInterceptor {","    func handleIntercept(_ intercept: TWSIntercepted) -> Bool {","        switch intercept {","        case .url(let url):","            if url.absoluteString == \"https:\/\/www.myWebPage.com\/helloWorld\" {","                return true","            } else if url.absoluteString.contains(\"https:\/\/www.myWebPage.com\/greetUser\/\") {","                return true","            }","            return false","                ","        default:","            return false","        }","    }","}"],"type":"file","syntax":"swift"},"CustomInterceptor_04.swift":{"content":["import Foundation","import SwiftUI","import TWS","","struct CustomView: View {","    let mySnippet = TWSSnippet(id: \"mySnippet\", target: URL(string: \"https:\/\/www.myWebPage.com\")!)","    @State var navigationInterceptor = NavigationInterceptor()","    ","    var body : some View {","        ZStack {","            TWSView(snippet: mySnippet)","                .twsBind(loadingView: { AnyView(LoadingView()) })","                .twsBind(preloadingView: { AnyView(LoadingView()) })","                .twsBind(errorView: { error in AnyView(ErrorView(error: error))})","                .twsBind(interceptor: NavigationInterceptor)","            switch navigationInterceptor.destination {","            case .helloWorld:","                Text(\"Hello World!\")","                    .frame(maxWidth: .infinity, maxHeight: .infinity)","                    .background(.white)","            case .greetUser(let username):","                Text(\"Hello, \\(username)!\")","                    .frame(maxWidth: .infinity, maxHeight: .infinity)","                    .background(.white)","            case .none:","                EmptyView()","            }","        }","    }","}","","class NavigationInterceptor: TWSViewInterceptor {","    var destination: Destination?","    ","    func handleIntercept(_ intercept: TWSIntercepted) -> Bool {","        switch intercept {","        case .url(let url):","            if url.absoluteString == \"https:\/\/www.myWebPage.com\/helloWorld\" {","                destination = .helloWorld","                return true","            } else if url.absoluteString.contains(\"https:\/\/www.myWebPage.com\/greetUser\/\") {","                destination = .greetUser(url.lastPathComponent)","                return true","            }","            return false","            ","        default:","            return false","        }","    }","}","","enum Destination {","    case helloWorld","    case greetUser(String)","}"],"type":"file","identifier":"CustomInterceptor_04.swift","fileName":"CustomView.swift","highlights":[{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27}],"fileType":"swift","syntax":"swift"},"CustomInterceptor_00.swift":{"identifier":"CustomInterceptor_00.swift","type":"file","highlights":[],"fileName":"CustomView.swift","content":["import Foundation","import SwiftUI","import TWS","","struct CustomView: View {","    let mySnippet = TWSSnippet(id: \"mySnippet\", target: URL(string: \"https:\/\/www.myWebPage.com\")!)","    ","    var body : some View {","        ZStack {","            TWSView(snippet: mySnippet)","                .twsBind(loadingView: { AnyView(LoadingView()) })","                .twsBind(preloadingView: { AnyView(LoadingView()) })","                .twsBind(errorView: { error in AnyView(ErrorView(error: error))})","        }","    }","}"],"fileType":"swift","syntax":"swift"},"doc://tws-ios.TWS/tutorials/Tutorial-Table-of-Contents/Display-your-first-snippet":{"identifier":"doc:\/\/tws-ios.TWS\/tutorials\/Tutorial-Table-of-Contents\/Display-your-first-snippet","url":"\/tutorials\/tutorial-table-of-contents\/display-your-first-snippet","abstract":[],"role":"article","kind":"article","title":"Display your first snippet","type":"topic"},"doc://tws-ios.TWS/tutorials/TWS/CustomizingViews":{"identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/CustomizingViews","abstract":[{"type":"text","text":"Learn how to customize your view to fit your applications profile."},{"type":"text","text":" "},{"type":"text","text":"Customize loading, preloading and error views."}],"type":"topic","title":"Customize views to fit your application","role":"project","url":"\/tutorials\/tws\/customizingviews","kind":"project","estimatedTime":"3min"},"doc://tws-ios.TWS/tutorials/TWS/RemoteSnippet":{"kind":"project","abstract":[{"type":"text","text":"Learn how to set up a manager to handle the logic and functionality of your snippets, as well as how to seamlessly integrate them into your SwiftUI views."}],"role":"project","estimatedTime":"3min","identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/RemoteSnippet","title":"Display your first remote snippet","type":"topic","url":"\/tutorials\/tws\/remotesnippet"},"doc://tws-ios.TWS/tutorials/TWS/LocalSnippet#Displaying-a-Snippet":{"abstract":[{"type":"text","text":"Learn how to work with TWS snippets locally without connecting to our backend service. This tutorial will guide you through the steps to display a webpage snippet in your app, bypassing the backend, and focusing solely on rendering and showcasing the snippet content."}],"url":"\/tutorials\/tws\/localsnippet#Displaying-a-Snippet","title":"Displaying a Snippet","role":"pseudoSymbol","kind":"section","type":"section","identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/LocalSnippet#Displaying-a-Snippet"},"doc://tws-ios.TWS/tutorials/TWS/MixAndMatch":{"abstract":[{"type":"text","text":"Once you start mixing remote and local snippets, there are a few important considerations to keep in mind. Since the manager is injected into the environment, it can be accessed from anywhere in the app. However, this setup assumes that snippets are handled remotely. To successfully work with both remote and local snippets, you’ll need to follow specific rules and best practices."}],"url":"\/tutorials\/tws\/mixandmatch","title":"Combine remote and local snippets","role":"project","estimatedTime":"5min","kind":"project","type":"topic","identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/MixAndMatch"},"CustomInterceptor_01.swift":{"identifier":"CustomInterceptor_01.swift","fileType":"swift","highlights":[{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22}],"fileName":"CustomView.swift","content":["import Foundation","import SwiftUI","import TWS","","struct CustomView: View {","    let mySnippet = TWSSnippet(id: \"mySnippet\", target: URL(string: \"https:\/\/www.myWebPage.com\")!)","    ","    var body : some View {","        ZStack {","            TWSView(snippet: mySnippet)","                .twsBind(loadingView: { AnyView(LoadingView()) })","                .twsBind(preloadingView: { AnyView(LoadingView()) })","                .twsBind(errorView: { error in AnyView(ErrorView(error: error))})","        }","    }","}","","class NavigationInterceptor: TWSViewInterceptor {","    func handleIntercept(_ intercept: TWSIntercepted) -> Bool {","        ","    }","}"],"type":"file","syntax":"swift"},"doc://tws-ios.TWS/tutorials/TWS/ManagerCreation#Manager-creation-and-registration":{"identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/ManagerCreation#Manager-creation-and-registration","abstract":[{"type":"text","text":"Learn different ways of creating and managing TWSManager"}],"type":"section","title":"Manager creation and registration","role":"pseudoSymbol","url":"\/tutorials\/tws\/managercreation#Manager-creation-and-registration","kind":"section"},"doc://tws-ios.TWS/tutorials/TWS/Notifications#Integrating-TWSNotifications":{"abstract":[{"text":"In this tutorial you will learn how to easily integrate TWSNotifications in your existing push notification code base.","type":"text"}],"url":"\/tutorials\/tws\/notifications#Integrating-TWSNotifications","title":"Integrating TWSNotifications","role":"pseudoSymbol","kind":"section","type":"section","identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/Notifications#Integrating-TWSNotifications"},"doc://tws-ios.TWS/tutorials/TWS/CustomInterceptor":{"identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/CustomInterceptor","abstract":[{"type":"text","text":"Learn how to intercept desired URLs and use them in native flows"}],"type":"topic","title":"Intercepting URL requests","role":"project","url":"\/tutorials\/tws\/custominterceptor","kind":"project","estimatedTime":"5min"},"doc://tws-ios.TWS/tutorials/TWS/CustomizingViews#Custom-loading-and-error-views":{"role":"pseudoSymbol","type":"section","url":"\/tutorials\/tws\/customizingviews#Custom-loading-and-error-views","title":"Custom loading and error views","identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/CustomizingViews#Custom-loading-and-error-views","abstract":[{"type":"text","text":"Learn how to customize your view to fit your applications profile."},{"type":"text","text":" "},{"type":"text","text":"Customize loading, preloading and error views."}],"kind":"section"},"doc://tws-ios.TWS/tutorials/TWS/LocalSnippet":{"abstract":[{"type":"text","text":"Learn how to work with TWS snippets locally without connecting to our backend service. This tutorial will guide you through the steps to display a webpage snippet in your app, bypassing the backend, and focusing solely on rendering and showcasing the snippet content."}],"url":"\/tutorials\/tws\/localsnippet","title":"Display your first local snippet","role":"project","estimatedTime":"2min","kind":"project","type":"topic","identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/LocalSnippet"},"doc://tws-ios.TWS/tutorials/TWS/RemoteSnippet#Presenting-snippets":{"kind":"section","abstract":[{"type":"text","text":"Learn how to set up a manager to handle the logic and functionality of your snippets, as well as how to seamlessly integrate them into your SwiftUI views."}],"role":"pseudoSymbol","identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/RemoteSnippet#Presenting-snippets","title":"Presenting snippets","type":"section","url":"\/tutorials\/tws\/remotesnippet#Presenting-snippets"},"doc://tws-ios.TWS/tutorials/TWS/CustomInterceptor#Custom-interceptors":{"abstract":[{"text":"Learn how to intercept desired URLs and use them in native flows","type":"text"}],"url":"\/tutorials\/tws\/custominterceptor#Custom-interceptors","title":"Custom interceptors","role":"pseudoSymbol","kind":"section","type":"section","identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/CustomInterceptor#Custom-interceptors"},"doc://tws-ios.TWS/tutorials/TWS/ManagerCreation":{"abstract":[{"text":"Learn different ways of creating and managing TWSManager","type":"text"}],"url":"\/tutorials\/tws\/managercreation","title":"Creating and managing TWSManager","role":"project","estimatedTime":"5min","kind":"project","type":"topic","identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/ManagerCreation"},"doc://tws-ios.TWS/tutorials/TWS/Notifications":{"role":"project","type":"topic","identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/Notifications","url":"\/tutorials\/tws\/notifications","title":"Integrating TWSNotifications with your notifications","estimatedTime":"3min","abstract":[{"type":"text","text":"In this tutorial you will learn how to easily integrate TWSNotifications in your existing push notification code base."}],"kind":"project"},"doc://tws-ios.TWS/tutorials/Tutorial-Table-of-Contents/Customizing-TWSView":{"role":"article","type":"topic","identifier":"doc:\/\/tws-ios.TWS\/tutorials\/Tutorial-Table-of-Contents\/Customizing-TWSView","url":"\/tutorials\/tutorial-table-of-contents\/customizing-twsview","title":"Customizing TWSView","abstract":[],"kind":"article"},"doc://tws-ios.TWS/tutorials/Tutorial-Table-of-Contents":{"role":"overview","abstract":[{"type":"text","text":"Follow the tutorials to learn how to use the SDK for displaying snippets."}],"url":"\/tutorials\/tutorial-table-of-contents","identifier":"doc:\/\/tws-ios.TWS\/tutorials\/Tutorial-Table-of-Contents","kind":"overview","type":"topic","title":"Getting Started"},"CustomInterceptor_03.swift":{"identifier":"CustomInterceptor_03.swift","fileType":"swift","highlights":[{"line":7},{"line":15},{"line":21},{"line":22},{"line":27},{"line":30},{"line":34},{"line":40},{"line":41},{"line":42},{"line":43},{"line":44}],"fileName":"CustomView.swift","content":["import Foundation","import SwiftUI","import TWS","","struct CustomView: View {","    let mySnippet = TWSSnippet(id: \"mySnippet\", target: URL(string: \"https:\/\/www.myWebPage.com\")!)","    @State var navigationInterceptor = NavigationInterceptor()","    ","    var body : some View {","        ZStack {","            TWSView(snippet: mySnippet)","                .twsBind(loadingView: { AnyView(LoadingView()) })","                .twsBind(preloadingView: { AnyView(LoadingView()) })","                .twsBind(errorView: { error in AnyView(ErrorView(error: error))})","                .twsBind(interceptor: NavigationInterceptor)","        }","    }","}","","class NavigationInterceptor: TWSViewInterceptor {","    var destination: Destination?","    ","    func handleIntercept(_ intercept: TWSIntercepted) -> Bool {","        switch intercept {","        case .url(let url):","            if url.absoluteString == \"https:\/\/www.myWebPage.com\/helloWorld\" {","                destination = .helloWorld","                return true","            } else if url.absoluteString.contains(\"https:\/\/www.myWebPage.com\/greetUser\/\") {","                destination = .greetUser(url.lastPathComponent)","                return true","            }","            return false","            ","        default:","            return false","        }","    }","}","","enum Destination {","    case helloWorld","    case greetUser(String)","}"],"syntax":"swift","type":"file"},"doc://tws-ios.TWS/tutorials/TWS/RemoteSnippet#Connect-with-the-TWS-portal":{"identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/RemoteSnippet#Connect-with-the-TWS-portal","type":"section","kind":"section","title":"Connect with the TWS portal","abstract":[{"type":"text","text":"Learn how to set up a manager to handle the logic and functionality of your snippets, as well as how to seamlessly integrate them into your SwiftUI views."}],"url":"\/tutorials\/tws\/remotesnippet#Connect-with-the-TWS-portal","role":"pseudoSymbol"},"doc://tws-ios.TWS/tutorials/TWS/MixAndMatch#Mix-Match":{"identifier":"doc:\/\/tws-ios.TWS\/tutorials\/TWS\/MixAndMatch#Mix-Match","type":"section","kind":"section","abstract":[{"type":"text","text":"Once you start mixing remote and local snippets, there are a few important considerations to keep in mind. Since the manager is injected into the environment, it can be accessed from anywhere in the app. However, this setup assumes that snippets are handled remotely. To successfully work with both remote and local snippets, you’ll need to follow specific rules and best practices."}],"title":"Mix & Match","url":"\/tutorials\/tws\/mixandmatch#Mix-Match","role":"pseudoSymbol"}}}